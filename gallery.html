<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ACHSOSA '93 SET Gallery</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>

  <!-- Header / Navbar -->
  <header>
    <div class="logo">
      <img src="https://raw.githubusercontent.com/slide-t/achsosa-93alumni/main/images/logo.png" alt="ACHSOSA Logo" class="logo-img">
      ACHSOSA '93 SET <i class="fas fa-graduation-cap"></i>
    </div>
    <div class="menu-toggle" onclick="toggleMenu()">â˜°</div>
    <nav id="navLinks">
      <a href="index.html">Home</a>
      <a href="#">About Us</a>
      <a href="#">Projects</a>
      <a href="#">Events</a>
      <a href="gallery.html">Gallery</a>
      <a href="alumni.html">Alumni Registration</a>
      <a href="#">Contact</a>
    </nav>
  </header>

  <!-- Gallery Section -->
  <section class="gallery-section">
    <h2 class="gallery-title">ACHSOSA '93 Gallery</h2>
    <div class="gallery-grid" id="galleryGrid"></div>

    <!-- Lightbox -->
    <div id="lightbox" class="lightbox">
      <span class="close">&times;</span>
      <img class="lightbox-img" src="" alt="">
      <div class="lightbox-caption"></div>
      <a class="prev">&#10094;</a>
      <a class="next">&#10095;</a>
    </div>
  </section>

  <!-- Footer -->
  <div id="footer-container"></div>

  <!-- Scripts -->
  <script src="script.js"></script>
  <script src="footer.js"></script>
  <script>
    // JSON array for gallery images
    const galleryImages = [
      { src: "https://raw.githubusercontent.com/slide-t/achsosa-93alumni/main/images/achsosa2.jpg", caption: "Alumni Gathering" },
      { src: "https://raw.githubusercontent.com/slide-t/achsosa-93alumni/main/images/achsosa3.jpg", caption: "School Memories" },
      { src: "https://raw.githubusercontent.com/slide-t/achsosa-93alumni/main/images/achsosa7.jpg", caption: "Community Project" },
      { src: "https://raw.githubusercontent.com/slide-t/achsosa-93alumni/main/images/achsosaazeez.jpg", caption: "Reunion" },
      { src: "https://raw.githubusercontent.com/slide-t/achsosa-93alumni/main/images/slide5.jpg", caption: "ACHSOSA Family" }
    ];

    const galleryGrid = document.getElementById('galleryGrid');
    let currentIndex = 0;

    // Populate gallery from JSON
    galleryImages.forEach((img, i) => {
      const div = document.createElement('div');
      div.className = 'gallery-item';
      div.innerHTML = `<img src="${img.src}" alt="${img.caption}" loading="lazy">
                       <div class="caption">${img.caption}</div>`;
      galleryGrid.appendChild(div);

      div.addEventListener('click', () => showLightbox(i));
    });

    // Lightbox
    const lightbox = document.getElementById('lightbox');
    const lightboxImg = lightbox.querySelector('.lightbox-img');
    const lightboxCaption = lightbox.querySelector('.lightbox-caption');
    const closeBtn = lightbox.querySelector('.close');
    const prevBtn = lightbox.querySelector('.prev');
    const nextBtn = lightbox.querySelector('.next');

    function showLightbox(index) {
      currentIndex = index;
      const img = galleryImages[index];
      lightboxImg.src = img.src;
      lightboxCaption.textContent = img.caption;
      lightbox.style.display = 'flex';
    }

    function closeLightbox() { lightbox.style.display = 'none'; }
    closeBtn.addEventListener('click', closeLightbox);
    lightbox.addEventListener('click', e => { if(e.target===lightbox) closeLightbox(); });

    prevBtn.addEventListener('click', () => {
      currentIndex = (currentIndex - 1 + galleryImages.length) % galleryImages.length;
      showLightbox(currentIndex);
    });

    nextBtn.addEventListener('click', () => {
      currentIndex = (currentIndex + 1) % galleryImages.length;
      showLightbox(currentIndex);
    });

    // Auto-slide every 5 seconds
    setInterval(() => {
      currentIndex = (currentIndex + 1) % galleryImages.length;
      showLightbox(currentIndex);
    }, 5000);

    // Load footer
    async function loadFooter() {
      try {
        const res = await fetch('footer.html', {cache: 'no-store'});
        const footerHTML = await res.text();
        document.getElementById('footer-container').innerHTML = footerHTML;
      } catch(err) {
        console.error(err);
      }
    }
    loadFooter();
  </script>
</body>
</html>
