<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ACHSOSA '93 SET GALLERY</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>

  <!-- Header / Navbar -->
  <header>
    <div class="logo">
      <img src="https://raw.githubusercontent.com/slide-t/achsosa-93alumni/main/images/logo.png" alt="ACHSOSA Logo" class="logo-img">
      ACHSOSA '93 SET <i class="fas fa-graduation-cap"></i>
    </div>
    <div class="menu-toggle" onclick="toggleMenu()">â˜°</div>
    <nav id="navLinks">
      <a href="index.html">Home</a>
      <a href="#">About Us</a>
      <a href="#">Projects</a>
      <a href="#">Events</a>
      <a href="gallery.html">Gallery</a>
      <a href="#">Contact</a>
    </nav>
  </header>

  <!-- Gallery Section -->
  <section class="gallery-section">
    <h2 class="gallery-title">ACHSOSA '93 Gallery</h2>
    <div class="gallery-grid"></div>

    <!-- Lightbox Modal -->
    <div id="lightbox" class="lightbox">
      <span class="close">&times;</span>
      <img class="lightbox-img" src="" alt="">
      <div class="lightbox-caption"></div>
      <a class="prev">&#10094;</a>
      <a class="next">&#10095;</a>
    </div>
  </section>

  <!-- Footer -->
  <div id="footer-container"></div>

  <!-- Scripts -->
  <script src="script.js"></script>
  <script src="footer.js"></script>
  <script>
    let galleryImages = [];
    let currentIndex = 0;
    let autoSlideInterval;

    async function loadGallery() {
      try {
        const res = await fetch('gallery.json', { cache: 'no-store' });
        galleryImages = await res.json();

        const grid = document.querySelector('.gallery-grid');
        grid.innerHTML = '';

        galleryImages.forEach((img, index) => {
          const div = document.createElement('div');
          div.classList.add('gallery-item');
          div.innerHTML = `
            <img src="${img.src}" alt="${img.alt}" loading="lazy">
            <div class="caption">${img.caption}</div>
          `;
          div.addEventListener('click', () => showLightbox(index));
          grid.appendChild(div);
        });

        startAutoSlide();
      } catch (err) {
        console.error('Gallery JSON error:', err);
      }
    }

    function showLightbox(index) {
      currentIndex = index;
      const lb = document.getElementById('lightbox');
      lb.style.display = 'flex';
      updateLightbox();
    }

    function updateLightbox() {
      const lbImg = document.querySelector('.lightbox-img');
      const lbCaption = document.querySelector('.lightbox-caption');
      lbImg.src = galleryImages[currentIndex].src;
      lbCaption.textContent = galleryImages[currentIndex].caption;
    }

    function nextImage() {
      currentIndex = (currentIndex + 1) % galleryImages.length;
      updateLightbox();
    }

    function prevImage() {
      currentIndex = (currentIndex - 1 + galleryImages.length) % galleryImages.length;
      updateLightbox();
    }

    function startAutoSlide() {
      clearInterval(autoSlideInterval);
      autoSlideInterval = setInterval(() => {
        currentIndex = (currentIndex + 1) % galleryImages.length;
        updateLightbox();
      }, 5000);
    }

    // Lightbox controls
    document.querySelector('.close').addEventListener('click', () => {
      document.getElementById('lightbox').style.display = 'none';
    });

    document.querySelector('.prev').addEventListener('click', prevImage);
    document.querySelector('.next').addEventListener('click', nextImage);

    document.getElementById('lightbox').addEventListener('click', e => {
      if (e.target === e.currentTarget) e.currentTarget.style.display = 'none';
    });

    loadGallery();
  </script>
</body>
</html>
